<%- partial ('../shared/_navbar.ejs') %>
<% var topic = data; %>
<section class="topic">
  <div class="container">
    <header>
      <h1><%- topic.name %><span>From <a href="<%- topic.package_version.uri %>"><%- topic.package_version.package_name %> v<%- topic.package_version.version %></a></span></h1>
      <div class="package--review pull-right" >
        <% if(!inViewerPane) { %>
          <a href="javascript:;" onclick="document.location.hash='postReview';" class="btn btn-primary">Review Topic</a>
        <% } else { %>
          <a href="<%= path + '#postReview' %>" class="btn btn-primary js-external">Review Topic</a>
        <% } %>
      </div>
    </header>

    <section>
      <h4><%- topic.title %></h4>
      <p><%- topic.description %></p>
    </section>

    <section class="topic--keywords">
      <dl>
        <dt>Keywords</dt>
        <% var keywords = topic.keywords.map(function(keyword) {
          return '<a href="/search/keywords/' + keyword.name + '">' + keyword.name + '</a>';
        }) -%>
        <dd><%- keywords.join(', ') %></dd>
      </dl>
    </section>

    <section class="topic--arguments">
      <h5 class="topic--title">Arguments</h5>
      <dl>
        <% for(var i = 0; i < topic.arguments.length; i++) { %>
          <dt><%- topic.arguments[i].name %></dt>
          <dd><%- topic.arguments[i].description %></dd>
        <% } %>
      </dl>
    </section>

    <!-- Other info -->
    <% if(topic.usage) { %>
      <section>
        <h5 class="topic--title">Usage</h5>
        <pre><code class="R"><%- topic.usage %></code></pre>
      </section>
    <% } %>

    <% if(topic.details) { %>
      <section>
        <h5 class="topic--title">Details</h5>
        <p><%- topic.details %></p>
      </section>
    <% } %>

    <% if(topic.value) { %>
      <section>
        <h5 class="topic--title">Value</h5>
        <p><%- topic.value %></p>
      </section>
    <% } %>

    <% if(topic.references) { %>
      <section>
        <h5 class="topic--title">References</h5>
        <p><%- topic.references %></p>
      </section>
    <% } %>

    <% if(topic.note) { %>
      <section>
        <h5 class="topic--title">Note</h5>
        <p><%- topic.note %></p>
      </section>
    <% } %>

    <% if(topic.seealso) { %>
      <section>
        <h5 class="topic--title">See Also</h5>
        <p><%- topic.seealso %></p>
      </section>
    <% } %>

    <% if(topic.examples) { %>
      <section>
        <h5 class="topic--title">Examples</h5>
        <pre><code class="R"><%- topic.examples %></code></pre>
      </section>
    <% } %>

    <small>
      <i> Documentation reproduced from package <span itemprop="name"><%- topic.package_version.package_name %></span>, version <span itemprop="version"><%- topic.package_version.version %></span>,
      License: <%= topic.package_version.license %>
      </i>
    </small>

    <% var reviewPostAction = '/api/topics/' + data.id + '/reviews' %>
    <%- include ../shared/_post_review.ejs %>
  </div>
</section>
<%- partial ('../shared/_footer.ejs') %>
